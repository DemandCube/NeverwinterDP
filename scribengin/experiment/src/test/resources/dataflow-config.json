{
  "id" :   "log-splitter-dataflow",
  "name" : "log-splitter-dataflow",
  "parallelism": 8,
  
  "master": {
    "numOfInstances": 2,
    "memory": 128,
    "cpuCores": 1
  },

  "worker": {
    "numOfInstances": 8,
    "memory": 128,
    "cpuCores": 1,
    "numOfExecutor": 2,
    "taskSwitchingPeriod" : 5000,
    "maxRunTime": 90000
  },

  "streams": {
    "default" : {
      "type" : "elasticsearch", 
      "address" : "127.0.0.1:9300", "indexName": "dataflow_app_log", "mappingType": "com.neverwinterdp.util.log.Log4jRecord"
    },

    "log4j": {
      "type" : "kafka", "topic" : "log4j", "zk.connect" : "127.0.0.1:2181", "reader" : "raw", "name" : "LogSplitterDataflow"
    },

    "log4j.info" : {
      "type" : "kafka", "topic" : "log4j.info", "zk.connect" : "127.0.0.1:2181", "name" : "LogSplitterDataflow"
    },

    "log4j.warn" : {
      "type" : "kafka", "topic" : "log4j.warn", "zk.connect" : "127.0.0.1:2181", "name" : "LogSplitterDataflow"
    },

    "log4j.error" : {
      "type" : "kafka", "topic" : "log4j.error", "zk.connect" : "127.0.0.1:2181", "name" : "LogSplitterDataflow"
    }
  },

  "operators": {
    "splitter": {
      "scribe" : "com.neverwinterdp.dataflow.logsample.LogMessageSplitter",
      "inputStream": "log4j",
      "outputStreams": ["default", "log4j.info", "log4j.warn", "log4j.error"]
    },

    "info": {
      "scribe" : "com.neverwinterdp.dataflow.logsample.LogMessageSplitter",
      "inputStream": "log4j.info",
      "outputStreams": ["log4j.aggregate"]
    },

    "warn": {
      "scribe" : "com.neverwinterdp.dataflow.logsample.LogMessageSplitter",
      "inputStream": "log4j.warn",
      "outputStreams": ["log4j.aggregate"]
    },

    "error": {
      "scribe" : "com.neverwinterdp.dataflow.logsample.LogMessageSplitter",
      "inputStream": "log4j.error",
      "outputStreams": ["log4j.aggregate"]
    }
  }  
}
